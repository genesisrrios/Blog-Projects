{"remainingRequest":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\src\\components\\Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\src\\components\\Map.vue","mtime":1598384707953},{"path":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQppbXBvcnQgeyBidXMgfSBmcm9tICcuLi9tYWluJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBtYXA6IG51bGwsDQogICAgICBhcGlSZXN1bHRzOm51bGwsDQogICAgICBtYXJrZXI6IG51bGwNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQgKCl7DQogICAgYnVzLiRvbigndXNlci1pbnB1dCcsICh1c2VySW5wdXQpID0+IHsNCiAgICAgIHRoaXMuZ2V0Q291bnRyeUluZm9ybWF0aW9uKHVzZXJJbnB1dCk7DQogICAgfSkNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLnByZXBhcmVNYXAoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldENvdW50cnlJbmZvcm1hdGlvbjogZnVuY3Rpb24gKHVzZXJJbnB1dCkgew0KICAgICAgbGV0IHNlbGYgPSB0aGlzOw0KICAgICAgZmV0Y2goYGh0dHBzOi8vcmVzdGNvdW50cmllcy5ldS9yZXN0L3YyL25hbWUvJHt1c2VySW5wdXR9YCkNCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkgICAgDQogICAgICAudGhlbihkYXRhID0+IHNlbGYuYXBpUmVzdWx0cyA9IGRhdGFbMF0pDQogICAgfSwNCiAgICBwcmVwYXJlTWFwOiBmdW5jdGlvbiAoKSB7DQogICAgICAvKiBlc2xpbnQtZGlzYWJsZSAqLyANCiAgICAgIHRoaXMubWFwID0gTC5tYXAoJ21hcCcpLnNldFZpZXcoWzE4LjIzODgsIC02Ni4wMzUyXSwgMTMpOw0KICAgICAgbGV0IG1haW5sYXllciA9IEwudGlsZUxheWVyKA0KICAgICAgICAgICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsDQogICAgICAgICAgew0KICAgICAgICAgICAgICBtYXhab29tOiAxOCwNCiAgICAgICAgICAgICAgYXR0cmlidXRpb246ICcmY29weTsgPGEgaHJlZj0iaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHQiPk9wZW5TdHJlZXRNYXA8L2E+LCAmY29weTsgPGEgaHJlZj0iaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb24iPkNBUlRPPC9hPicsDQogICAgICAgICAgfQ0KICAgICAgKTsNCiAgICAgIG1haW5sYXllci5hZGRUbyh0aGlzLm1hcCk7DQogICAgfSwNCiAgICBtYXJrQ29vcmRpbmF0ZXM6IGZ1bmN0aW9uIChjb29yZGluYXRlcykgew0KICAgICAgaWYodGhpcy5tYXJrZXIpDQogICAgICAgIHRoaXMubWFwLnJlbW92ZUxheWVyKHRoaXMubWFya2VyKTsNCiAgICAgIHRoaXMubWFya2VyID0gTC5tYXJrZXIoY29vcmRpbmF0ZXMpLmFkZFRvKHRoaXMubWFwKTsNCiAgICAgIHRoaXMubWFwLmZseVRvKGNvb3JkaW5hdGVzLCAxMCk7DQogICAgfSwNCiAgICBtYXBJbmZvcm1hdGlvbkNvbnRyb2w6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlYWZsZXQtaW5mb3JtYXRpb24tYm94Jyk7DQogICAgICBpZihlbGVtZW50KQ0KICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7DQogICAgICBsZXQgc2VsZiA9IHRoaXM7DQogICAgICBsZXQgaW5mb3JtYXRpb25Cb3ggPSBMLmNvbnRyb2woe3Bvc2l0aW9uOiAnYm90dG9tbGVmdCd9KTsNCiAgICAgIGxldCBkaXYgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCAnbGVhZmxldC1iYXIgbGVhZmxldC1jb250cm9sIGxlYWZsZXQtY29udHJvbC1jdXN0b20nKTsNCiAgICAgIGRpdi5pZCA9ICdsZWFmbGV0LWluZm9ybWF0aW9uLWJveCcNCiAgICAgIGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnd2hpdGUnOw0KICAgICAgZGl2LnN0eWxlLndpZHRoID0gJzEwMCUnOw0KICAgICAgZGl2LnN0eWxlLnBhZGRpbmdUb3AgPSAnMTBweCc7DQogICAgICBkaXYuc3R5bGUucGFkZGluZ0xlZnQgPSAnN3B4JzsNCiAgICAgIGRpdi5zdHlsZS5oZWlnaHQgPSAnNDAwcHgnOw0KICAgICAgZGl2LmRhdGFfdG9nZ2xlID0gJ2NvbnRyb2wtc2lkZWJhcic7DQogICAgICBkaXYuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7DQogICAgICBkaXYuaW5uZXJIVE1MICs9IGA8aDU+SW5mb3JtYWNpb24gc29icmU6ICR7dGhpcy5hcGlSZXN1bHRzLm5hbWV9PC9oNT5gOw0KICAgICAgZGl2LmlubmVySFRNTCArPSAnPGJyPicNCiAgICAgIGRpdi5pbm5lckhUTUwgKz0gYDxwPkNhcGl0YWw6ICR7dGhpcy5hcGlSZXN1bHRzLmNhcGl0YWx9PC9wPmANCiAgICAgIGRpdi5pbm5lckhUTUwgKz0gYDxwPlN1YiBSZWdpb246ICR7dGhpcy5hcGlSZXN1bHRzLnN1YnJlZ2lvbn08L3A+YA0KICAgICAgZGl2LmlubmVySFRNTCArPSBgPHA+TW9uZWRhOiAke3RoaXMuYXBpUmVzdWx0cy5jdXJyZW5jaWVzWzBdLm5hbWV9ICR7dGhpcy5hcGlSZXN1bHRzLmN1cnJlbmNpZXNbMF0uc3ltYm9sfTwvcD5gDQogICAgICBkaXYuaW5uZXJIVE1MICs9IGA8aW1nIGNsYXNzPSJmbHVpZCIgc3R5bGU9ImhlaWdodDo5MHB4O3dpZHRoOjkwcHg7IiBzcmM9IiR7dGhpcy5hcGlSZXN1bHRzLmZsYWd9IiBhbHQ9IkNvdW50cnkgZmxhZyI+PC9pbWc+YA0KICAgICAgaW5mb3JtYXRpb25Cb3gub25BZGQgPSBmdW5jdGlvbiAobWFwKSB7DQogICAgICAgIHJldHVybiBkaXY7DQogICAgICB9ICAgDQogICAgICBpbmZvcm1hdGlvbkJveC5hZGRUbyh0aGlzLm1hcCk7DQogICAgfQ0KICB9LA0KICB3YXRjaCA6IHsNCiAgICBhcGlSZXN1bHRzICgpIHsNCiAgICAgIGxldCBjb29yZGluYXRlcyA9IHRoaXMuYXBpUmVzdWx0cy5sYXRsbmc7DQogICAgICB0aGlzLm1hcmtDb29yZGluYXRlcyhjb29yZGluYXRlcyk7DQogICAgICB0aGlzLm1hcEluZm9ybWF0aW9uQ29udHJvbCgpOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Map.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div id=\"map\"></div>\r\n</template>\r\n\r\n<script>\r\nimport { bus } from '../main'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      map: null,\r\n      apiResults:null,\r\n      marker: null\r\n    }\r\n  },\r\n  created (){\r\n    bus.$on('user-input', (userInput) => {\r\n      this.getCountryInformation(userInput);\r\n    })\r\n  },\r\n  mounted() {\r\n    this.prepareMap();\r\n  },\r\n  methods: {\r\n    getCountryInformation: function (userInput) {\r\n      let self = this;\r\n      fetch(`https://restcountries.eu/rest/v2/name/${userInput}`)\r\n      .then(response => response.json())    \r\n      .then(data => self.apiResults = data[0])\r\n    },\r\n    prepareMap: function () {\r\n      /* eslint-disable */ \r\n      this.map = L.map('map').setView([18.2388, -66.0352], 13);\r\n      let mainlayer = L.tileLayer(\r\n          'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\r\n          {\r\n              maxZoom: 18,\r\n              attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attribution\">CARTO</a>',\r\n          }\r\n      );\r\n      mainlayer.addTo(this.map);\r\n    },\r\n    markCoordinates: function (coordinates) {\r\n      if(this.marker)\r\n        this.map.removeLayer(this.marker);\r\n      this.marker = L.marker(coordinates).addTo(this.map);\r\n      this.map.flyTo(coordinates, 10);\r\n    },\r\n    mapInformationControl: function () {\r\n      let element = document.getElementById('leaflet-information-box');\r\n      if(element)\r\n        element.parentNode.removeChild(element);\r\n      let self = this;\r\n      let informationBox = L.control({position: 'bottomleft'});\r\n      let div = L.DomUtil.create('div', 'leaflet-bar leaflet-control leaflet-control-custom');\r\n      div.id = 'leaflet-information-box'\r\n      div.style.backgroundColor = 'white';\r\n      div.style.width = '100%';\r\n      div.style.paddingTop = '10px';\r\n      div.style.paddingLeft = '7px';\r\n      div.style.height = '400px';\r\n      div.data_toggle = 'control-sidebar';\r\n      div.style.overflow = 'auto';\r\n      div.innerHTML += `<h5>Informacion sobre: ${this.apiResults.name}</h5>`;\r\n      div.innerHTML += '<br>'\r\n      div.innerHTML += `<p>Capital: ${this.apiResults.capital}</p>`\r\n      div.innerHTML += `<p>Sub Region: ${this.apiResults.subregion}</p>`\r\n      div.innerHTML += `<p>Moneda: ${this.apiResults.currencies[0].name} ${this.apiResults.currencies[0].symbol}</p>`\r\n      div.innerHTML += `<img class=\"fluid\" style=\"height:90px;width:90px;\" src=\"${this.apiResults.flag}\" alt=\"Country flag\"></img>`\r\n      informationBox.onAdd = function (map) {\r\n        return div;\r\n      }   \r\n      informationBox.addTo(this.map);\r\n    }\r\n  },\r\n  watch : {\r\n    apiResults () {\r\n      let coordinates = this.apiResults.latlng;\r\n      this.markCoordinates(coordinates);\r\n      this.mapInformationControl();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#map { \r\n  height: 600px;\r\n  width: 100% \r\n}\r\n\r\n</style>"]}]}