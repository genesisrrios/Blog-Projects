{"remainingRequest":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\src\\components\\Map.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\src\\components\\Map.vue","mtime":1598384707953},{"path":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jmaldonado\\Documents\\VueJS-ConsumingAPIS\\rest-countries\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KI21hcCB7IA0KICBoZWlnaHQ6IDYwMHB4Ow0KICB3aWR0aDogMTAwJSANCn0NCg0K"},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA","file":"Map.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div id=\"map\"></div>\r\n</template>\r\n\r\n<script>\r\nimport { bus } from '../main'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      map: null,\r\n      apiResults:null,\r\n      marker: null\r\n    }\r\n  },\r\n  created (){\r\n    bus.$on('user-input', (userInput) => {\r\n      this.getCountryInformation(userInput);\r\n    })\r\n  },\r\n  mounted() {\r\n    this.prepareMap();\r\n  },\r\n  methods: {\r\n    getCountryInformation: function (userInput) {\r\n      let self = this;\r\n      fetch(`https://restcountries.eu/rest/v2/name/${userInput}`)\r\n      .then(response => response.json())    \r\n      .then(data => self.apiResults = data[0])\r\n    },\r\n    prepareMap: function () {\r\n      /* eslint-disable */ \r\n      this.map = L.map('map').setView([18.2388, -66.0352], 13);\r\n      let mainlayer = L.tileLayer(\r\n          'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\r\n          {\r\n              maxZoom: 18,\r\n              attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attribution\">CARTO</a>',\r\n          }\r\n      );\r\n      mainlayer.addTo(this.map);\r\n    },\r\n    markCoordinates: function (coordinates) {\r\n      if(this.marker)\r\n        this.map.removeLayer(this.marker);\r\n      this.marker = L.marker(coordinates).addTo(this.map);\r\n      this.map.flyTo(coordinates, 10);\r\n    },\r\n    mapInformationControl: function () {\r\n      let element = document.getElementById('leaflet-information-box');\r\n      if(element)\r\n        element.parentNode.removeChild(element);\r\n      let self = this;\r\n      let informationBox = L.control({position: 'bottomleft'});\r\n      let div = L.DomUtil.create('div', 'leaflet-bar leaflet-control leaflet-control-custom');\r\n      div.id = 'leaflet-information-box'\r\n      div.style.backgroundColor = 'white';\r\n      div.style.width = '100%';\r\n      div.style.paddingTop = '10px';\r\n      div.style.paddingLeft = '7px';\r\n      div.style.height = '400px';\r\n      div.data_toggle = 'control-sidebar';\r\n      div.style.overflow = 'auto';\r\n      div.innerHTML += `<h5>Informacion sobre: ${this.apiResults.name}</h5>`;\r\n      div.innerHTML += '<br>'\r\n      div.innerHTML += `<p>Capital: ${this.apiResults.capital}</p>`\r\n      div.innerHTML += `<p>Sub Region: ${this.apiResults.subregion}</p>`\r\n      div.innerHTML += `<p>Moneda: ${this.apiResults.currencies[0].name} ${this.apiResults.currencies[0].symbol}</p>`\r\n      div.innerHTML += `<img class=\"fluid\" style=\"height:90px;width:90px;\" src=\"${this.apiResults.flag}\" alt=\"Country flag\"></img>`\r\n      informationBox.onAdd = function (map) {\r\n        return div;\r\n      }   \r\n      informationBox.addTo(this.map);\r\n    }\r\n  },\r\n  watch : {\r\n    apiResults () {\r\n      let coordinates = this.apiResults.latlng;\r\n      this.markCoordinates(coordinates);\r\n      this.mapInformationControl();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#map { \r\n  height: 600px;\r\n  width: 100% \r\n}\r\n\r\n</style>"]}]}